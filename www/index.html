<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/css/materialize.min.css">
    <link rel="stylesheet" href="/css/MaterialIcons.css">
    <link rel="stylesheet" href="/css/page.css">
    <link rel="stylesheet" href="/css/aos.css">
    <title>Global Shaper's Community</title>
</head>

<body id="body_index">

    <!-- <div class="container"> -->

    <div class="row">
        <div class="col s12 l1">
            <img src="images/gscn%20copy.png" alt="" width="220">
        </div>

        <div class="col s12 l8" style="overflow: visible">
            <div style="margin-left: 250px;overflow-x: visible">
                <h3 class="center">Urban Mobility India 2018</h3>
                <h5 class="center"> 2<sup>nd</sup> - 4<sup>th</sup> November, Nagpur</h5>
                <div class="text" id="text">
                    <h4 class="center">
                        #LetsDoIt
                    </h4>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col s1">
            <img src="images/scale.png" alt="" height="400px" id="scale">
        </div>
        <div class="col s2">
            <div class="bar" id="barbody0">
                <!-- <div class="left"></div>
                <div class="right"></div> -->
                <div class="baroverlay" id="bar0" style="border-top:6px solid white"></div>
            </div> 
            <div id="bardone0" class="bardone center">You <br> did <br> it!</div>
        </div>
        <div class="col s2">
            <div class="bar" id="barbody1">
                <!-- <div class="left"></div>
                <div class="right"></div> -->
                <div class="baroverlay" id="bar1" style="border-top:6px solid white"></div>
            <div id="bardone1" class="bardone center">You <br> did <br> it!</div>
            </div>
        </div>
        <div class="col s2">
            <div class="bar" id="barbody2">
                <!-- <div class="left"></div>
                <div class="right"></div> -->
                <div class="baroverlay" id="bar2" style="border-top:6px solid white"></div>
            <div id="bardone2" class="bardone center">You <br> did <br> it!</div>
            </div>
        </div>
        <div class="col s2">
            <div class="bar" id="barbody3">
                <!-- <div class="left"></div>
                <div class="right"></div> -->
                <div class="baroverlay" id="bar3" style="border-top:6px solid white"></div>
            <div id="bardone3" class="bardone center">You <br> did <br> it!</div>
            </div>
        </div>
        <div class="col s2">
            <div class="bar" id="barbody4">
                <!-- <div class="left"></div>
                <div class="right"></div> -->
                <div class="baroverlay" id="bar4" style="border-top:6px solid white"></div>
            <div id="bardone4" class="bardone center">You <br> did <br> it!</div>
            </div>
        </div>
<!-- 
        <div class="col s3 tree"></div>
        <div class="col s2 tree"></div>
        <div class="col s2 tree"></div>
        <div class="col s2 tree"></div>
        <div class="col s3 tree"></div> -->

    </div>



    <div class="row">
        <div class="col s12 l2">
            <canvas id="foo0" style="margin-left: 80px;"></canvas>
            <p class="center"><span id="fooval0" style="margin-left: 80px;">0</span> kmph</p>
        </div>
        <div class="col s12 l2">
            <canvas id="foo1" style="margin-left: 80px;"></canvas>
            <p class="center"><span id="fooval1" style="margin-left: 80px;">0</span> kmph</p>
        </div>
        <div class="col s12 l2">
            <canvas id="foo2" style="margin-left: 80px;"></canvas>
            <p class="center"><span id="fooval2" style="margin-left: 80px;">0</span> kmph</p>
        </div>
        <div class="col s12 l2">
            <canvas id="foo3" style="margin-left: 80px;"></canvas>
            <p class="center"><span id="fooval3" style="margin-left: 80px;">0</span> kmph</p>
        </div>
        <div class="col s12 l2">
            <canvas id="foo4" style="margin-left: 80px;"></canvas>
            <p class="center"><span id="fooval4" style="margin-left: 80px;">0</span> kmph</p>
        </div>

    </div>
    <div class="fixed-action-btn">
        <a class="btn-floating btn-large red">
            <i class="large material-icons">add</i>
        </a>
        <ul>
            <li><a class="btn-floating red" onclick="videoplay1()"><i class="material-icons">play_circle_outline</i>1</a></li>
            <li><a class="btn-floating red" onclick="videoplay2()"><i class="material-icons">play_circle_outline</i>2</a></li>
            <li><a class="btn-floating red" onclick="videoplay3()"><i class="material-icons">play_circle_outline</i>3</a></li>
            <li><a class="btn-floating red" onclick="videoplay4()"><i class="material-icons">play_circle_outline</i>4</a></li>
            <li><a class="btn-floating red" onclick="videoplay5()"><i class="material-icons">play_circle_outline</i>5</a></li>
            <!-- <li><a class="btn-floating yellow darken-1" onclick="openNav()"><i class="material-icons">polymer</i></a></li> -->
            <li><a class="btn-floating green" href="splash.html"><i class="material-icons">strikethrough_s</i></a></li>

            <li><a class="btn-floating yellow" onclick="showcongrats()"><i class="material-icons">account_circle</i></a></li>
            <li><a class="btn-floating yellow" onclick="resetstats()"><i class="material-icons">filter_vintage</i></a></li>

        </ul>
    </div>


    <!-- Modal Script!!!!! -->
    <!-- 
    <div class="modal" id="modalhurray">
            <img src="images/congra.png" alt="">
    </div> -->

    <!-- </div> -->

    <div class="overlay center valign-wrapper" id="overlay1">
        <div class="full-width center">
            <img src="images/congra.png" alt="">

        </div>
    </div>
    <div class="overlay center" id="videodiv1">
        <div class="row">
            <div class="col s12 right-align">
                <a href="index.html"><i class="medium material-icons">clear</i></a>
            </div>
        </div>
        <div class="full-width center">
            <video class="responsive-video" controls width="40%" height="40%">
                <source src="videos/Video 1.mp4" type="video/mp4">
            </video>

        </div>
    </div>
    <div class="overlay center" id="videodiv2">
        <div class="row">
            <div class="col s12 right-align">
                <a href="index.html"><i class="medium material-icons">clear</i></a>
            </div>
        </div>
        <div class="full-width center">
            <video class="responsive-video" controls width="40%" height="40%">
                <source src="videos/Video 2.mp4" type="video/mp4">
            </video>

        </div>
    </div>
    <div class="overlay center" id="videodiv3">
        <div class="row">
            <div class="col s12 right-align">
                <a href="index.html"><i class="medium material-icons">clear</i></a>
            </div>
        </div>

        <div class="full-width center">
            <video class="responsive-video" controls width="40%" height="40%">
                <source src="videos/Video 3.mp4" type="video/mp4">
            </video>
        </div>
    </div>
    <div class="overlay center" id="videodiv4">
        <div class="row">
            <div class="col s12 right-align">
                <a href="index.html"><i class="medium material-icons">clear</i></a>
            </div>
        </div>
        <div class="full-width center">
            <video class="responsive-video" controls width="40%" height="40%">
                <source src="videos/Video 4.mp4" type="video/mp4">
            </video>
        </div>
    </div>
    <div class="overlay center" id="videodiv5">
        <div class="row">
            <div class="col s12 right-align">
                <a href="index.html"><i class="medium material-icons">clear</i></a>
            </div>
        </div>
        <div class="full-width center">
            <br><br>
            <video class="responsive-video" controls width="40%" height="40%">
                <source src="videos/Video 5.mp4" type="video/mp4">
            </video>
        </div>
    </div>


    <audio src="/audio/claps.wav" id="audioclaps" type="audio/wav"></audio>
    <audio src="/audio/cycle.wav" id="audiocycle" type="audio/wav" loop="loop"></audio>



    <script src="/js/jquery.min.js"></script>
    <script src="/js/materialize.min.js"></script>
    <!-- <script src="/js/Chart.Bundle.min.js"></script> -->
    <script src="/js/gauge.min.js"></script>
    <script src="js/aos.js"></script>
    <!-- <script src="/js/chart.js"></script> -->
    <script src="/js/gauge.js"></script>

    <script>
        AOS.init();
    </script>
    <script>
        $(document).ready(function () {
            M.AutoInit();
            $('.fixed-action-btn').floatingActionButton();
            // mrunal();
            $("#overlay1").hide();
            $("#videodiv5").hide();
            $("#videodiv4").hide();
            $("#videodiv3").hide();
            $("#videodiv2").hide();
            $("#videodiv1").hide();

            $("#bardone0").hide();
            $("#bardone1").hide();
            $("#bardone2").hide();
            $("#bardone3").hide();
            $("#bardone4").hide();

            setGuage([10, 10, 10, 10, 10]);

            setBar([400, 400, 400, 400, 400]);
            cycle.play();
            claps.pause();


        });
    </script>

    <script src="/js/index.js"></script>



    <script src="/socket.io-client/dist/socket.io.js"></script>

    <script>
        var socket = io.connect('http://localhost:3450');

        var dome = [false, false, false, false, false];


        var claps = document.getElementById("audioclaps");
        var cycle = document.getElementById("audiocycle");


        function showtree(item) {
            $("#barbody" + item).slideUp();
            $("#bardone" + item).slideDown();
            $("#foo" + item).hide();
            $("#fooval" + item).hide();
            //$("#tree" + item).show();
            dome[item] = true;
        }


        function resetstats() {
            console.log("reset sent");
            $.get('/reset', true, function(done){
                if(done){
                    location.reload();
                }
            });
        }

        function checkdone(data) {
            for (var item in data) {
                if (data[item].meters > 400 && !dome[item]) {
                    showtree(item);
                }
            }

            if (!(dome.includes(false))) {
                showcongrats();
            }

        }

        function hidecongrats() {
            $("#overlay1").fadeOut();
            claps.pause();
            cycle.load();
            cycle.play();
        }

        function showcongrats() {
            console.log("one");
            $("#overlay1").fadeIn();
            cycle.pause();
            claps.load();
            claps.play();

            setTimeout(hidecongrats, 4000);
        }

        function videoplay1() {
            $("#videodiv1").fadeIn();
        }

        function videoplay2() {
            $("#videodiv2").fadeIn();
        }

        function videoplay3() {
            $("#videodiv3").fadeIn();
        }

        function videoplay4() {
            $("#videodiv4").fadeIn();
        }

        function videoplay5() {
            $("#videodiv5").fadeIn();
        }


        socket.on('data', function (data) {
            console.log(data);

            setGuage([data[0].kmph, data[1].kmph, data[2].kmph, data[3].kmph, data[4].kmph]);

            setBar([data[0].meters, data[1].meters, data[2].meters, data[3].meters, data[4].meters]);
            checkdone(data);

        });
    </script>
</body>

</html>
